window.__require=function e(t,o,n){function r(i,s){if(!o[i]){if(!t[i]){var l=i.split("/");if(l=l[l.length-1],!t[l]){var a="function"==typeof __require&&__require;if(!s&&a)return a(l,!0);if(c)return c(l,!0);throw new Error("Cannot find module '"+i+"'")}}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){return r(t[i][1][e]||e)},u,u.exports,e,t,o,n)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({CalculateBtn:[function(e,t,o){"use strict";cc._RF.push(t,"e6d6fie7fFOzpan5hKZb2Q0","CalculateBtn"),cc.Class({extends:cc.Component,properties:{scale:0,index:{default:0,type:cc.Integer},symbol:{default:0,type:cc.Integer},gameContainer:{default:null,type:cc.Node}},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){for(var t=e.target,o=t.parent.children,n=0;n<o.length;n++){o[n].runAction(cc.scaleTo(.1,1,1))}t.runAction(cc.scaleTo(.1,.8,.8))}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){var t=this.index,o=this.symbol;console.log("index="+t+", symbol="+o);var n=this.gameContainer.getComponent("Game");switch(t){case 1:n.firstBtn=this.node;break;case 2:n.secondBtn=this.node;break;case 3:n.thirdBtn=this.node}this.gameContainer.getComponent("Game").calculate()}.bind(this))},start:function(){}}),cc._RF.pop()},{}],Calculate:[function(e,t,o){"use strict";cc._RF.push(t,"0d2dcYPktRAHLNU2hTJvhCS","Calculate"),cc.Class({extends:cc.Component,properties:{id:1,firstBtn:{default:null,type:cc.Node},secondBtn:{default:null,type:cc.Node},thirdBtn:{default:null,type:cc.Node}},onLoad:function(){},start:function(){},calculate:function(){this.node.getChildByName("")}}),cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"eab32XSc2ZAWJRYitl2iltc","Game"),cc.Class({extends:cc.Component,properties:{bgAudio:{default:null,url:cc.AudioClip},gameLevel:{default:0,type:cc.Integer},pokerValue:{default:[],type:[cc.Integer]},pokerType:{default:[],type:[cc.String]},pokers:{default:[],type:[cc.Object]},firstBtn:{default:null,type:cc.Node},secondBtn:{default:null,type:cc.Node},thirdBtn:{default:null,type:cc.Node},resultInfo:{default:null,type:cc.Label},pokerInfo:{default:null,type:cc.Label},selectedVal:{default:[],type:[cc.Integer]},expreArr:{default:[],type:[cc.Integer]},calArr:{default:[],type:[cc.Integer]},expreInfoArr:{default:[],type:[cc.String]},result:{default:0,type:cc.Integer},lastPokerValues:{default:[],type:[cc.Integer]},lastPokerLbl:{default:null,type:cc.Label},lastExpression:{default:null,type:cc.Label}},onLoad:function(){cc.director.preloadScene("Menu",function(){console.log("\u9884\u52a0\u8f7d\u6e38\u620f\u573a\u666f")}),this.current=cc.audioEngine.play(this.bgAudio,!0,1),this.resultInfo.string="",this.pokerType=["clubs","diamonds","hearts","spades"];var e=this.node.getChildByName("buttons").getChildByName("hit"),t=this.node.getChildByName("buttons").getChildByName("restart_btn"),o=this.node.getChildByName("buttons").getChildByName("back_btn");e.on(cc.Node.EventType.TOUCH_START,function(e){this.expreInfoArr=[],e.target.runAction(cc.sequence(cc.scaleTo(.1,.85,.85),cc.scaleTo(.1,1,1),cc.callFunc(function(){this.refreshPoker()},this))),cc.loader.loadRes("audio/button",cc.AudioClip,function(e,t){cc.audioEngine.play(t,!1,1)});var t=this.node.getChildByName("first_porker"),o=this.node.getChildByName("second_porker"),n=this.node.getChildByName("third_porker"),r=this.node.getChildByName("forth_porker"),c=t.getComponent("Porker").value,i=o.getComponent("Porker").value,s=n.getComponent("Porker").value,l=r.getComponent("Porker").value;this.lastPokerValues=[c,i,s,l];var a="\u4e0a\u5c40\u63d0\u793a\uff1a\n\n"+c+", "+i+", "+s+", "+l;this.lastPokerLbl.string=a,this.recursiveCal(this.selectedVal);var u="\u65e0\u89e3";if(this.expreInfoArr.length>0){u="";for(var h=0;h<this.expreInfoArr.length;h++)u=u+this.expreInfoArr[h]+"\n\n"}this.lastExpression.string=u},this),t.on(cc.Node.EventType.TOUCH_START,function(e){e.target.runAction(cc.sequence(cc.scaleTo(.1,.85,.85),cc.scaleTo(.1,1,1),cc.callFunc(function(){this.refreshPoker()},this))),cc.loader.loadRes("audio/button",cc.AudioClip,function(e,t){cc.audioEngine.play(t,!1,1)}),this.initGame()},this),o.on(cc.Node.EventType.TOUCH_START,function(e){var t=e.target;cc.loader.loadRes("audio/button",cc.AudioClip,function(e,t){cc.audioEngine.play(t,!1,1)}),t.runAction(cc.sequence(cc.scaleTo(.1,.85,.85),cc.scaleTo(.1,1,1),cc.callFunc(function(){cc.director.loadScene("Menu")},this)))},this)},initGame:function(){this.clearTips(),0==this.gameLevel?this.pokerValue=[1,2,3,4,5,6,7,8,9,10]:this.pokerValue=[1,2,3,4,5,6,7,8,9,10,11,12,13],this.pokers=[];for(var e=0;e<this.pokerType.length;e++)for(var t=0;t<this.pokerValue.length;t++){var o=this.pokerValue[t]+"-"+this.pokerType[e],n=this.pokerValue[t],r=new Object;r.key=o,r.value=n,this.pokers.push(r)}},start:function(){},onDestroy:function(){cc.audioEngine.stop(this.current)},refreshPoker:function(){for(var e=this.node.getChildByName("calculate_button").children,t=0;t<e.length;t++)for(var o=e[t].children,n=0;n<o.length;n++){o[n].runAction(cc.scaleTo(.1,1,1))}this.firstBtn=null,this.secondBtn=null,this.thirdBtn=null,this.forthBtn=null;cc.loader.loadRes("audio/card_deal",cc.AudioClip,function(e,t){cc.audioEngine.play(t,!1,1)});var r=this.node.getChildByName("first_porker"),c=this.node.getChildByName("second_porker"),i=this.node.getChildByName("third_porker"),s=this.node.getChildByName("forth_porker"),l=this.node.getChildByName("cal_first_porker"),a=this.node.getChildByName("cal_second_porker"),u=this.node.getChildByName("cal_third_porker"),h=this.node.getChildByName("cal_forth_porker"),p=0,d=0,g=0,f=0,m=this.getPoker();m&&(cc.loader.loadRes("game/"+m.key,cc.SpriteFrame,function(e,t){r.getComponent(cc.Sprite).spriteFrame=t}),r.getComponent("Porker").value=m.value,r.getComponent("Porker").key=m.key,p=m.value),(m=this.getPoker())&&(cc.loader.loadRes("game/"+m.key,cc.SpriteFrame,function(e,t){c.getComponent(cc.Sprite).spriteFrame=t}),c.getComponent("Porker").value=m.value,c.getComponent("Porker").key=m.key,d=m.value),(m=this.getPoker())&&(cc.loader.loadRes("game/"+m.key,cc.SpriteFrame,function(e,t){i.getComponent(cc.Sprite).spriteFrame=t}),i.getComponent("Porker").value=m.value,i.getComponent("Porker").key=m.key,g=m.value),(m=this.getPoker())&&(cc.loader.loadRes("game/"+m.key,cc.SpriteFrame,function(e,t){s.getComponent(cc.Sprite).spriteFrame=t}),s.getComponent("Porker").value=m.value,s.getComponent("Porker").key=m.key,f=m.value),this.selectedVal=[p,d,g,f],cc.loader.loadRes("game/poker_bg",cc.SpriteFrame,function(e,t){l.getComponent(cc.Sprite).spriteFrame=t,l.getComponent("Porker").key="",l.getComponent("Porker").value=0,a.getComponent(cc.Sprite).spriteFrame=t,a.getComponent("Porker").key="",a.getComponent("Porker").value=0,u.getComponent(cc.Sprite).spriteFrame=t,u.getComponent("Porker").key="",u.getComponent("Porker").value=0,h.getComponent(cc.Sprite).spriteFrame=t,h.getComponent("Porker").key="",h.getComponent("Porker").value=0})},getPoker:function(){this.pokers.length<=0&&this.showInfo("\u6ca1\u724c\u5566\uff0c\u8bf7\u91cd\u65b0\u5f00\u59cb");for(var e=[],t=0;t<this.pokers.length;t++)this.pokers[t]&&this.pokers[t].key&&this.pokers[t].value&&e.push(this.pokers[t]);if(this.pokers=e,!(this.pokers.length<=0)){var o=Math.floor(Math.random()*(this.pokers.length-1-0+1)+0),n=this.pokers[o];return this.pokers.splice(o,1),this.showPokerInfo(),n}},recursiveCal:function(e){for(var t=0;t<e.length;t++){var o=e[t];this.calArr.push(o);var n=this.rebuildArr(t,e);if(n.length<=0?(this.result=this.calculateVal(this.calArr),this.expreArr=[]):this.result=this.recursiveCal(n),this.calArr.pop(),24==this.result)return this.result}},rebuildArr:function(e,t){for(var o=[],n=0;n<t.length;n++)n!=e&&o.push(t[n]);return o},calculateVal:function(e){for(var t=0,o=0;o<e.length;o++){var n=e[o];this.expreArr.push(n);var r=this.rebuildArr(o,e);if(r.length<=0)return t=this.executeExpre(this.expreArr),this.expreArr.pop(),this.expreArr.pop(),t;for(var c=1;c<=4;c++){if(this.expreArr.push(c),24==(t=this.calculateVal(r)))return t;if(r.length<=0)return t=this.executeExpre(this.expreArr),this.expreArr.pop(),this.expreArr.pop(),t}return this.expreArr.pop(),this.expreArr.pop(),0}},executeExpre:function(e){var t=e[0],o=e[1],n=e[2],r=e[3],c=e[4],i=e[5],s=e[6],l=[],a=this.getResult(t,n,o,l),u=this.getResult(a,c,r,l),h=this.getResult(u,s,i,l);if(Number.isInteger(a)&&Number.isInteger(u)&&24==h)return console.log(l),this.expreInfoArr=l,h;l=[];a=this.getResult(t,n,o,l),u=this.getResult(c,s,i,l);if(h=this.getResult(a,u,r,l),Number.isInteger(a)&&Number.isInteger(u)&&24==h)return console.log(l),this.expreInfoArr=l,h;l=[];a=this.getResult(n,c,r,l),u=this.getResult(t,a,o,l);if(h=this.getResult(u,s,i,l),Number.isInteger(a)&&Number.isInteger(u)&&24==h)return console.log(l),this.expreInfoArr=l,h;l=[];a=this.getResult(n,c,r,l),u=this.getResult(a,s,i,l);if(h=this.getResult(t,u,o,l),Number.isInteger(a)&&Number.isInteger(u)&&24==h)return console.log(l),this.expreInfoArr=l,h;l=[];a=this.getResult(c,s,i,l),u=this.getResult(n,a,r,l);return h=this.getResult(t,u,o,l),Number.isInteger(a)&&Number.isInteger(u)&&24==h&&(console.log(l),this.expreInfoArr=l),this.expreTemp=[],h},getResult:function(e,t,o,n){var r=0;switch(o){case 1:r=e+t,n.push(e+"+"+t+"="+r);break;case 2:r=e-t,n.push(e+"-"+t+"="+r);break;case 3:r=e*t,n.push(e+"*"+t+"="+r);break;case 4:r=t&&t>0?e/t:0,n.push(e+"/"+t+"="+r)}return r},calculate:function(){var e=this.node.getChildByName("cal_first_porker"),t=this.node.getChildByName("cal_second_porker"),o=this.node.getChildByName("cal_third_porker"),n=this.node.getChildByName("cal_forth_porker"),r=e.getComponent("Porker").value,c=t.getComponent("Porker").value,i=o.getComponent("Porker").value,s=n.getComponent("Porker").value;if(r=r||0,c=c||0,i=i||0,s=s||0,this.firstBtn&&this.secondBtn&&this.thirdBtn&&r>0&&c>0&&i>0&&s>0){var l=this.firstBtn.getComponent("CalculateBtn").symbol,a=this.secondBtn.getComponent("CalculateBtn").symbol,u=this.thirdBtn.getComponent("CalculateBtn").symbol,h=this.calculateResult(r,c,l);console.log("symbol:"+l+"\u7b2c\u4e00\u4e2a\u503c"+r+"\u548c\u7b2c\u4e8c\u4e2a\u503c"+c+"\u8ba1\u7b97\u7ed3\u679c\u4e3a\uff1a"+h);var p=this.calculateResult(h,i,a);console.log("symbol:"+a+"\u7b2c\u4e00\u4e2a\u7ed3\u679c"+h+"\u548c\u7b2c\u4e09\u4e2a\u503c"+i+"\u8ba1\u7b97\u7ed3\u679c\u4e3a\uff1a"+p);var d=this.calculateResult(p,s,u);if(console.log("symbol:"+u+"\u7b2c\u4e8c\u4e2a\u7ed3\u679c"+p+"\u548c\u7b2c\u56db\u4e2a\u503c"+s+"\u8ba1\u7b97\u7ed3\u679c\u4e3a\uff1a"+d),console.log("\u8ba1\u7b97\u7ed3\u679c\u4e3a\uff1a"+d),24==d)return this.showInfo("\u8fc7\u5173"),this.refreshPoker(),void this.clearTips();if(h=this.calculateResult(r,c,l),console.log("symbol:"+l+"\u7b2c\u4e00\u4e2a\u503c"+r+"\u548c\u7b2c\u4e8c\u4e2a\u503c"+c+"\u8ba1\u7b97\u7ed3\u679c\u4e3a\uff1a"+h),p=this.calculateResult(i,s,u),console.log("symbol:"+u+"\u7b2c\u4e09\u4e2a\u503c"+i+"\u548c\u7b2c\u56db\u4e2a\u503c"+s+"\u8ba1\u7b97\u7ed3\u679c\u4e3a\uff1a"+p),d=this.calculateResult(h,p,a),console.log("symbol:"+a+"\u7b2c\u4e8c\u4e2a\u7ed3\u679c"+h+"\u548c\u7b2c\u4e8c\u4e2a\u7ed3\u679c"+p+"\u8ba1\u7b97\u7ed3\u679c\u4e3a\uff1a"+d),24==d)return this.showInfo("\u8fc7\u5173"),this.refreshPoker(),void this.clearTips();if(h=this.calculateResult(c,i,a),console.log("symbol:"+a+"\u7b2c\u4e8c\u4e2a\u503c"+c+"\u548c\u7b2c\u4e09\u4e2a\u503c"+i+"\u8ba1\u7b97\u7ed3\u679c\u4e3a\uff1a"+h),p=this.calculateResult(r,h,l),console.log("symbol:"+l+"\u7b2c\u4e00\u4e2a\u503c"+r+"\u548c\u7b2c\u4e00\u4e2a\u7ed3\u679c"+h+"\u8ba1\u7b97\u7ed3\u679c\u4e3a\uff1a"+p),d=this.calculateResult(p,s,u),console.log("symbol:"+u+"\u7b2c\u4e8c\u4e2a\u7ed3\u679c"+p+"\u548c\u7b2c\u56db\u4e2a\u503c"+s+"\u8ba1\u7b97\u7ed3\u679c\u4e3a\uff1a"+d),24==d)return this.showInfo("\u8fc7\u5173"),this.refreshPoker(),void this.clearTips()}},calculateResult:function(e,t,o){var n=0;switch(o){case 1:n=e+t;break;case 2:n=e-t;break;case 3:n=e*t;break;case 4:n=e/t}return n},showInfo:function(e){this.resultInfo.string=e,this.resultInfo.scheduleOnce(function(){this.string=""},2)},showPokerInfo:function(){var e=this.pokers.length;this.pokerInfo.string="\u5269\u4f59\u724c\u6570\uff1a"+e},clearTips:function(){this.lastExpression.string="",this.lastPokerLbl.string=""}}),cc._RF.pop()},{}],Menu:[function(e,t,o){"use strict";cc._RF.push(t,"ab919TBuFpObqk93T8dX0jj","Menu"),cc.Class({extends:cc.Component,properties:{bgAudio:{default:null,url:cc.AudioClip}},onLoad:function(){this.bgAudioId=cc.audioEngine.play(this.bgAudio,!0,1),cc.director.preloadScene("Game",function(){console.log("\u9884\u52a0\u8f7d\u6e38\u620f\u573a\u666f")});var e=this.node.getChildByName("quickStartBtn"),t=this.node.getChildByName("advanceBtn"),o=this.node.getChildByName("onlineBtn");e&&(e.on(cc.Node.EventType.TOUCH_START,function(e){console.log("\u6309\u4e0b\u5feb\u901f\u5f00\u59cb\u6309\u94ae"),e.target.runAction(cc.scaleTo(.1,.85)),cc.loader.loadRes("audio/button",cc.AudioClip,function(e,t){cc.audioEngine.play(t,!1,1)})}),e.on(cc.Node.EventType.TOUCH_END,function(e){console.log("\u6309\u4e0b\u5feb\u901f\u5f00\u59cb\u6309\u94ae\u7ed3\u675f");var t=e.target,o=cc.sequence(cc.scaleTo(.1,1),cc.callFunc(function(){console.log("\u5f00\u59cb\u6267\u884c\u52a8\u4f5c\u56de\u8c03"),cc.director.loadScene("Game",function(){var e=cc.director.getScene().getChildByName("Canvas").getComponent("Game");e.gameLevel=0,e.initGame()})}));t.runAction(o)})),t&&(t.on(cc.Node.EventType.TOUCH_START,function(e){console.log("\u6309\u4e0b\u8fdb\u9636\u573a\u6309\u94ae"),e.target.runAction(cc.scaleTo(.1,.85)),cc.loader.loadRes("audio/button",cc.AudioClip,function(e,t){cc.audioEngine.play(t,!1,1)})}),t.on(cc.Node.EventType.TOUCH_END,function(e){console.log("\u6309\u4e0b\u5feb\u901f\u5f00\u59cb\u6309\u94ae\u7ed3\u675f");var t=e.target,o=cc.sequence(cc.scaleTo(.1,1),cc.callFunc(function(){console.log("\u5f00\u59cb\u6267\u884c\u52a8\u4f5c\u56de\u8c03"),cc.director.loadScene("Game",function(){var e=cc.director.getScene().getChildByName("Canvas").getComponent("Game");e.gameLevel=1,e.initGame()})}));t.runAction(o)})),o&&o.on(cc.Node.EventType.TOUCH_START,function(e){console.log("\u8fdb\u5165\u5728\u7ebf\u5bf9\u6218")})},onDestroy:function(){cc.audioEngine.stop(this.bgAudioId)}}),cc._RF.pop()},{}],Porker:[function(e,t,o){"use strict";cc._RF.push(t,"a0895cSgHNEw7bVRbnN04/t","Porker"),cc.Class({extends:cc.Component,properties:{value:{default:1,type:cc.Integer},key:{default:"",type:cc.String},positionX:{default:0,type:cc.Float},positionY:{default:0,type:cc.Float},originalX:{default:0,type:cc.Float},originalY:{default:0,type:cc.Float},zIndex:{default:0,type:cc.Integer}},onLoad:function(){this.positionX=this.node.x,this.positionY=this.node.y,this.node.zIndex=0,this.node.on(cc.Node.EventType.TOUCH_START,function(e){console.log("\u83b7\u53d6\u5230\u7684\u4f4d\u7f6e\u4e3a\uff1ax="+e.getLocation().x+", y="+e.getLocation().y),this.originalX=this.node.position.x,this.originalY=this.node.position.y,this.node.zIndex=100},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var t=e.getLocation().x-this.node.parent.position.x,o=e.getLocation().y-this.node.parent.position.y;this.node.position=cc.v2(t,o)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.node.zIndex=0;var t=this.node.parent,o=t.getChildByName("cal_first_porker"),n=[o,t.getChildByName("cal_second_porker"),t.getChildByName("cal_third_porker"),t.getChildByName("cal_forth_porker")];console.log("\u79fb\u52a8\u7ed3\u675f"),console.log(this.node.getBoundingBoxToWorld()),console.log(o.getBoundingBoxToWorld());for(var r=0;r<n.length;r++){var c=n[r];this.changePoker(c)}this.node.position=cc.v2(this.positionX,this.positionY),this.node.parent.getComponent("Game").calculate()},this)},start:function(){},changePoker:function(e){var t=this.node.parent,o=[t.getChildByName("cal_first_porker"),t.getChildByName("cal_second_porker"),t.getChildByName("cal_third_porker"),t.getChildByName("cal_forth_porker")];if(cc.Intersection.rectRect(this.node.getBoundingBoxToWorld(),e.getBoundingBoxToWorld())){for(var n=null,r=0;r<o.length;r++){var c=o[r],i=c.getComponent("Porker").key;i&&i==this.key&&(n=c)}console.log(n);var s=this.key,l=this.value;e.getComponent("Porker").key&&n&&(cc.loader.loadRes("game/"+e.getComponent("Porker").key,cc.SpriteFrame,function(e,t){n.getComponent(cc.Sprite).spriteFrame=t}),n.getComponent("Porker").key=e.getComponent("Porker").key,n.getComponent("Porker").value=e.getComponent("Porker").value),cc.loader.loadRes("game/"+s,cc.SpriteFrame,function(t,o){e.getComponent(cc.Sprite).spriteFrame=o}),e.getComponent("Porker").key=s,e.getComponent("Porker").value=l}}}),cc._RF.pop()},{}]},{},["Calculate","CalculateBtn","Game","Menu","Porker"]);